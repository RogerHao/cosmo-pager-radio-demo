# =============================================================================
# Cosmo Pager Radio - ESP32 BLE HID Keyboard Configuration
# Target: Seeed Studio XIAO ESP32S3
# =============================================================================

# -----------------------------------------------------------------------------
# Bluetooth Configuration - NimBLE Only (No Classic BT)
# -----------------------------------------------------------------------------
# Enable Bluetooth
CONFIG_BT_ENABLED=y

# Use NimBLE stack (lighter than Bluedroid, ~30KB smaller)
# Must explicitly disable Bluedroid since it's the default in choice BT_HOST
CONFIG_BT_BLUEDROID_ENABLED=n
CONFIG_BT_NIMBLE_ENABLED=y

# NimBLE HID Service
CONFIG_BT_NIMBLE_HID_SERVICE=y

# Device name (will appear when pairing)
CONFIG_BT_NIMBLE_SVC_GAP_DEVICE_NAME="cosmo-radio-input"

# Security - enable bonding for persistent pairing
CONFIG_BT_NIMBLE_SM_LEGACY=y
CONFIG_BT_NIMBLE_SM_SC=y

# Reduce NimBLE memory usage
CONFIG_BT_NIMBLE_MAX_CONNECTIONS=1
CONFIG_BT_NIMBLE_MAX_BONDS=3
CONFIG_BT_NIMBLE_MAX_CCCDS=8
CONFIG_BT_NIMBLE_ROLE_CENTRAL=n
CONFIG_BT_NIMBLE_ROLE_OBSERVER=n

# -----------------------------------------------------------------------------
# HID Device Configuration
# -----------------------------------------------------------------------------
# Set device role to Keyboard (from Kconfig.projbuild)
CONFIG_EXAMPLE_KBD_ENABLE=y

# -----------------------------------------------------------------------------
# Flash & Partition
# -----------------------------------------------------------------------------
# Use large single app partition (more space for code)
CONFIG_PARTITION_TABLE_SINGLE_APP_LARGE=y

# Flash size for XIAO ESP32S3 (8MB)
CONFIG_ESPTOOLPY_FLASHSIZE_8MB=y

# -----------------------------------------------------------------------------
# Power Management
# -----------------------------------------------------------------------------
# Disable tickless idle to prevent BLE disconnection issues
# With optimized connection parameters (~200ÂµA), 3000mAh battery lasts months
CONFIG_PM_ENABLE=y
CONFIG_FREERTOS_USE_TICKLESS_IDLE=n

# -----------------------------------------------------------------------------
# Logging (reduce for production)
# -----------------------------------------------------------------------------
# CONFIG_LOG_DEFAULT_LEVEL_INFO=y
# CONFIG_LOG_MAXIMUM_LEVEL_INFO=y

# -----------------------------------------------------------------------------
# Compiler Optimization
# -----------------------------------------------------------------------------
# Optimize for size (saves flash, slightly slower)
# CONFIG_COMPILER_OPTIMIZATION_SIZE=y
